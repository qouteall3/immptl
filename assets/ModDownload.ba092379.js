import C from"./SimpleAccordion.1ba10ee2.js";import{_ as z,f as F,y as L,Z as h,h as O,M as R,o as l,c as d,F as m,B as g,$ as S,a as P,w as v,b as c,t as a}from"./app.6c6fd354.js";import"./CollapseTransition.a4ddc9fa.js";const j={class:"outer-div"},D={style:{"font-size":"1.3rem"}},I={style:{"font-size":"1.1rem"}},U=["href"],$={style:{"font-size":"0.6rem"}},E=F({__name:"ModDownload",props:{github_repo:null,locale_text:null},setup(w){const u=w;function x(r){var n=-1;for(let e=0;e<r.length;e++){let o=r.charAt(e);if(o>="0"&&o<="9"){n=e;break}}if(n===-1)return"unknown";var t=-1;for(let e=n;e<r.length;e++)if(r.charAt(e)==="-"){t=e;break}return t===-1?"unknown":r.substring(n,t)}function b(r,n,t){let e=r.indexOf(n);if(e===-1)return"";let o=r.indexOf(t,e+n.length);return o===-1?"":r.substring(e+n.length,o)}function V(r){return b(r,"-mc","-")}function M(r,n){for(var t=r.split("."),e=n.split("."),o=0;;){var p=o<t.length,_=o<e.length;if(p&&!_)return 1;if(!p&&_)return-1;if(!p&&!_)return 0;var s=parseInt(t[o]),i=parseInt(e[o]);if(s>i)return 1;if(s<i)return-1;o++}}function k(r){var n=r.assets.filter(o=>o.name.indexOf("fabric")>=0);if(n.length===0)return null;var t=n[0];const e=r.published_at.substr(0,r.published_at.indexOf("T"));return{mcVersion:V(t.name),modVersion:x(t.name),downloadUrl:t.browser_download_url,changeLog:r.body,isPreRelease:r.prerelease,publishTime:e,downloadCount:t.download_count}}let y=L(!0),T=h([]),f=h(new Map),A=O(()=>{var r=Array.from(f.values());return r.sort((n,t)=>-M(n.mcVersion,t.mcVersion)),r});async function B(r){for(var n=1;;){let e=`https://api.github.com/repos/${r}/releases?page=`+n;const s=await(await fetch(e)).json();if(s.length===0){y.value=!1;break}for(let i of s){var t=k(i);t!==null&&(f.has(t.mcVersion)||f.set(t.mcVersion,{mcVersion:t.mcVersion,content:[]}),f.get(t.mcVersion).content.push(t))}T.push(...s),n++,await new Promise(i=>setTimeout(i,1e3))}}return R(()=>{B(u.github_repo)}),(r,n)=>(l(),d("div",j,[(l(!0),d(m,null,g(S(A),t=>(l(),d("div",{key:t.mcVersion,class:"outer-card"},[P(C,null,{title:v(()=>[c("div",D,"MC "+a(t.mcVersion),1)]),content:v(()=>[(l(!0),d(m,null,g(t.content,e=>(l(),d("div",{key:e.modVersion,class:"inner-card"},[c("div",I,a(e.isPreRelease?u.locale_text.preRelease+"  ":"")+a(e.modVersion),1),c("p",null,a(e.changeLog),1),c("a",{href:e.downloadUrl,style:{"font-size":"1.2rem"}},a(u.locale_text.download),9,U),c("p",$,a(u.locale_text.publishTime)+": "+a(e.publishTime),1)]))),128))]),_:2},1024)]))),128))]))}});var G=z(E,[["__scopeId","data-v-12ddf1ab"],["__file","ModDownload.vue"]]);export{G as default};
